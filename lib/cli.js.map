{"version":3,"sources":["../src/cli.js"],"names":["filename","output","port","process","argv","basename","path","chdir","dirname","html","content","console","log","app","url","env","stdio","detached","shell","emit"],"mappings":";;AAAA;;AACA;;AACA;;AAEA;;AACA;;AACA;;AACA;;AACA;;;;AAEA,MAAM;AAACA,EAAAA,QAAD;AAAWC,EAAAA,MAAX;AAAmBC,EAAAA;AAAnB,IAA2B,mBAAKC,OAAO,CAACC,IAAb,CAAjC;;AACA,MAAMC,QAAQ,GAAGC,cAAKD,QAAL,CAAcL,QAAd,CAAjB;;AACAG,OAAO,CAACI,KAAR,CAAcD,cAAKE,OAAL,CAAaR,QAAb,CAAd;;AAEA,IAAIC,MAAJ,EAAY;AACR,GAAC,kBAAgB;AACb,UAAMQ,IAAI,GAAG,MAAM,gCAAiBJ,QAAjB,EAA2B,IAA3B,CAAnB;AACA,UAAMK,OAAO,GAAG,gCAAiBL,QAAjB,EAA2BI,IAA3B,CAAhB;AACAE,IAAAA,OAAO,CAACC,GAAR,CAAYF,OAAZ;AACH,GAJD;AAKH,CAND,MAMO;AACH,QAAMG,GAAG,GAAG,qBAAOX,IAAP,EAAaG,QAAb,CAAZ;AACA,QAAMS,GAAG,GAAI,oBAAmBZ,IAAK,EAArC;;AACA,MAAIC,OAAO,CAACY,GAAR,CAAY,gBAAZ,CAAJ,EAAmC;AAC/B,8BAAM,IAAN,EAAY,CAAC,IAAD,EAAQ,GAAEZ,OAAO,CAACY,GAAR,CAAY,gBAAZ,CAA8B,OAAxC,EAAgD,IAAhD,EAAsDD,GAAtD,CAAZ,EAAwE;AACpEE,MAAAA,KAAK,EAAE,QAD6D;AAEpEC,MAAAA,QAAQ,EAAE,IAF0D;AAGpEC,MAAAA,KAAK,EAAE;AAH6D,KAAxE;AAKH,GAND,MAMO;AACH,sBAAIJ,GAAJ;AACH;;AACD,sBAAMT,QAAN,EAAgB,MAAM;AAClBQ,IAAAA,GAAG,CAACM,IAAJ,CAAS,UAAT;AACH,GAFD;AAGH","sourcesContent":["import path from 'path';\nimport opn from 'opn';\nimport { spawn } from 'child_process';\n\nimport args from './args';\nimport server from './server';\nimport watch from './watch';\nimport { downloadTemplate } from './template';\nimport { readMarkdownFile } from './markdown';\n\nconst {filename, output, port} = args(process.argv);\nconst basename = path.basename(filename);\nprocess.chdir(path.dirname(filename));\n\nif (output) {\n    (async function(){\n        const html = await readMarkdownFile(basename, true);\n        const content = downloadTemplate(basename, html);\n        console.log(content);\n    })()\n} else {\n    const app = server(port, basename);\n    const url = `http://localhost:${port}`;\n    if (process.env['MDLIVE_BROWSER']) {\n        spawn('sh', ['-c', `${process.env['MDLIVE_BROWSER']} \"$1\"`, '--', url], {\n            stdio: 'ignore',\n            detached: true,\n            shell: false,\n        });\n    } else {\n        opn(url);\n    }\n    watch(basename, () => {\n        app.emit('markdown');\n    });\n}\n"],"file":"cli.js"}